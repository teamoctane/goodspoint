import { createContext, useContext, useEffect, useState } from 'react';

const LangCtx = createContext();

export const LANGS = { EN: 'en', HI: 'hi' };

const dict = {
  en: {
    speak: 'Click to speak',
    type: 'Click to type',
    back: 'Back',
    login: 'Login / Sign up',
    logout: 'Log out',
    account: 'Account',
    chat: 'Chat',
    listening: 'Listening…',
    type_placeholder: 'Type to search…',
    search: 'Search',
    buy_now: 'Buy Now for',
    place_bid: 'Place Bid',
    inquire: 'Inquire',
    max_qty: 'Max qty',
    condition: 'Condition',
    description: 'Description',
    home: 'Home',
    sell: 'Sell',
    about: 'About Us',
    voice_platform: 'Voice-First',
    platform_for: 'Platform for',
    business_goods: 'Business Goods',
    upload_image: 'Upload Image',
    describe_what_you_want: 'Describe what you want…',
    signup: 'Sign up',
    email: 'Email',
    password: 'Password',
    show_password: 'Show password',
    hide_password: 'Hide password',
    create_account: 'Create account',
    have_account: 'Have an account? Log in',
    need_account: 'Need an account? Sign up',
    log_in: 'Log in',
    product: 'product',
    products: 'products',
    english: 'English',
    hindi: 'हिन्दी',
    question: 'Question',
    your_answer: 'Your answer…',
    select_product: 'Select a product',
    more: 'More',
    bid_placed: 'Bid placed!',
    bought_for: 'Bought for',
    products_shown: 'products shown',
    what_industry: 'Great – what industry are you in?',
    preferred_brand: 'Thanks – any preferred brand?',
    price_range: 'What is your preferred price range?',
    messages: 'Messages',
    no_messages_yet: 'No messages yet',
    start_inquiry_to_chat: 'Start an inquiry to begin chatting with sellers',
    select_conversation: 'Select a conversation',
    choose_conversation_to_start: 'Choose a conversation from the list to start messaging',
    type_message: 'Type a message...',
    start_voice_input: 'Start voice input',
    stop_listening: 'Stop listening',
    speech_not_supported: 'Speech recognition is not supported in your browser',
    dashboard: 'Dashboard',
    settings: 'Settings',
    username: 'Username',
    change: 'Change',
    preferences: 'Preferences',
    current_language: 'Current language',
    notifications: 'Notifications',
    email_notifications: 'Email notifications',
    manage: 'Manage',
    danger_zone: 'Danger Zone',
    log_out: 'Log Out',
    delete_account: 'Delete Account',
    delete_account_confirm: 'Are you sure you want to delete your account? This action cannot be undone.',
    account_deleted: 'Your account has been deleted.',
    sell_your_product: 'Sell Your Product',
    product_title: 'Product Title',
    enter_product_title: 'Enter product title',
    describe_your_product: 'Describe your product...',
    price: 'Price',
    new: 'New',
    like_new: 'Like New',
    good: 'Good',
    fair: 'Fair',
    poor: 'Poor',
    category: 'Category',
    category_placeholder: 'e.g., Electronics, Clothing, Books',
    location: 'Location',
    location_placeholder: 'City, State',
    contact_information: 'Contact Information',
    contact_placeholder: 'Phone or email',
    thumbnail_image: 'Thumbnail Image',
    gallery_images: 'Gallery Images',
    gallery_images_optional: 'Gallery Images (optional, max 5)',
    cancel: 'Cancel',
    create_product: 'Create Product',
    creating_product: 'Creating Product...',
    product_created_successfully: 'Product created successfully!',
    fill_required_fields: 'Please fill title, description, category and upload a thumbnail image',
    file_size_limit: 'Thumbnail file size must be less than 5MB',
    max_gallery_images: 'Maximum 5 gallery images allowed',
    gallery_file_size_limit: 'Each gallery image must be less than 5MB',
    failed_to_create_product: 'Failed to create product. Please try again.',
    search_products: 'Search Products',
    searching: 'Searching...',
    upload_images: 'Upload Images',
    drag_drop_images: 'Drag and drop images here or click to select',
    max_2_images: 'Maximum 2 images, 5MB each',
    selected_images: 'Selected Images',
    search_results: 'Search Results',
    found_products: 'Found {count} product{plural} matching your images',
    no_products_found: 'No products found',
    try_different_images: 'Try uploading different images or adjust your search criteria',
    add_more_images: 'Add More Images',
    remaining: 'remaining',
    loading: 'Loading...',
    loading_messages: 'Loading messages...',
    edited: 'edited',
  },
  hi: {
    speak: 'बोलने के लिए क्लिक करें',
    type: 'टाइप करने के लिए क्लिक करें',
    back: 'वापस',
    login: 'लॉगिन / साइन-अप',
    logout: 'लॉग आउट',
    account: 'खाता',
    chat: 'चैट',
    listening: 'सुन रहा हूँ…',
    type_placeholder: 'खोजने के लिए टाइप करें…',
    search: 'खोजें',
    buy_now: 'अभी खरीदें',
    place_bid: 'बोली लगाएं',
    inquire: 'पूछताछ',
    max_qty: 'अधिकतम मात्रा',
    condition: 'स्थिति',
    description: 'विवरण',
    home: 'होम',
    sell: 'बेचें',
    about: 'हमारे बारे में',
    voice_platform: 'वॉइस-फर्स्ट',
    platform_for: 'के लिए प्लेटफ़ॉर्म',
    business_goods: 'व्यावसायिक वस्तुएं',
    upload_image: 'छवि अपलोड करें',
    describe_what_you_want: 'आप क्या चाहते हैं इसका वर्णन करें…',
    signup: 'साइन अप',
    email: 'ईमेल',
    password: 'पासवर्ड',
    show_password: 'पासवर्ड दिखाएं',
    hide_password: 'पासवर्ड छुपाएं',
    create_account: 'खाता बनाएं',
    have_account: 'पहले से खाता है? लॉगिन करें',
    need_account: 'खाता नहीं है? साइन अप करें',
    log_in: 'लॉगिन',
    product: 'उत्पाद',
    products: 'उत्पाद',
    english: 'English',
    hindi: 'हिन्दी',
    question: 'प्रश्न',
    your_answer: 'आपका जवाब…',
    select_product: 'एक उत्पाद चुनें',
    more: 'और',
    bid_placed: 'बोली लगाई गई!',
    bought_for: 'खरीदा गया',
    products_shown: 'उत्पाद दिखाए गए',
    what_industry: 'बढ़िया – आप किस उद्योग में हैं?',
    preferred_brand: 'धन्यवाद – कोई पसंदीदा ब्रांड?',
    price_range: 'आपकी पसंदीदा कीमत सीमा क्या है?',
    messages: 'संदेश',
    no_messages_yet: 'अभी तक कोई संदेश नहीं',
    start_inquiry_to_chat: 'विक्रेताओं के साथ चैट शुरू करने के लिए पूछताछ शुरू करें',
    select_conversation: 'बातचीत चुनें',
    choose_conversation_to_start: 'मैसेजिंग शुरू करने के लिए सूची से एक बातचीत चुनें',
    type_message: 'संदेश लिखें...',
    start_voice_input: 'वॉइस इनपुट शुरू करें',
    stop_listening: 'सुनना बंद करें',
    speech_not_supported: 'आपके ब्राउज़र में स्पीच रिकग्निशन समर्थित नहीं है',
    dashboard: 'डैशबोर्ड',
    settings: 'सेटिंग्स',
    username: 'उपयोगकर्ता नाम',
    change: 'बदलें',
    preferences: 'वरीयताएं',
    current_language: 'वर्तमान भाषा',
    notifications: 'सूचनाएं',
    email_notifications: 'ईमेल सूचनाएं',
    manage: 'प्रबंधित करें',
    danger_zone: 'खतरा क्षेत्र',
    log_out: 'लॉग आउट',
    delete_account: 'खाता हटाएं',
    delete_account_confirm: 'क्या आप वाकई अपना खाता हटाना चाहते हैं? यह क्रिया पूर्ववत नहीं की जा सकती।',
    account_deleted: 'आपका खाता हटा दिया गया है।',
    
    // OTP Verification translations
    email_verification: 'ईमेल सत्यापन',
    phone_verification: 'फोन सत्यापन',
    email_status: 'ईमेल स्थिति',
    phone_status: 'फोन स्थिति',
    verified: 'सत्यापित',
    not_verified: 'सत्यापित नहीं',
    no_phone_number: 'कोई फोन नंबर नहीं',
    verify_email: 'ईमेल सत्यापित करें',
    verify_phone: 'फोन सत्यापित करें',
    add_phone: 'फोन जोड़ें',
    send_otp: 'OTP भेजें',
    verify_otp: 'OTP सत्यापित करें',
    verify: 'सत्यापित करें',
    verifying: 'सत्यापित कर रहे हैं...',
    sending: 'भेज रहे हैं...',
    adding: 'जोड़ रहे हैं...',
    add: 'जोड़ें',
    enter_otp: 'OTP दर्ज करें',
    enter_otp_sent_to: 'भेजे गए OTP को दर्ज करें',
    enter_phone_number: 'अपना फोन नंबर दर्ज करें',
    phone_number_placeholder: '+91 98765 43210',
    otp_sent: 'OTP सफलतापूर्वक भेजा गया',
    otp_verified: 'OTP सफलतापूर्वक सत्यापित',
    otp_expired: 'OTP की समय सीमा समाप्त हो गई',
    otp_invalid: 'अमान्य OTP',
    otp_send_failed: 'OTP भेजने में विफल',
    otp_verify_failed: 'OTP सत्यापन में विफल',
    email_verified: 'ईमेल सत्यापित',
    email_not_verified: 'ईमेल सत्यापित नहीं',
    phone_verified: 'फोन सत्यापित',
    phone_not_verified: 'फोन सत्यापित नहीं',
    add_phone_number: 'फोन नंबर जोड़ें',
    phone_number: 'फोन नंबर',
    resend_otp: 'OTP दोबारा भेजें',
    otp_resent: 'OTP दोबारा भेजा गया',
    seconds_remaining: 'सेकंड शेष',
    
    sell_your_product: 'अपना उत्पाद बेचें',
    product_title: 'उत्पाद शीर्षक',
    enter_product_title: 'उत्पाद शीर्षक दर्ज करें',
    describe_your_product: 'अपने उत्पाद का वर्णन करें...',
    price: 'कीमत',
    new: 'नया',
    like_new: 'नया जैसा',
    good: 'अच्छा',
    fair: 'औसत',
    poor: 'खराब',
    category: 'श्रेणी',
    category_placeholder: 'जैसे, इलेक्ट्रॉनिक्स, कपड़े, किताबें',
    location: 'स्थान',
    location_placeholder: 'शहर, राज्य',
    contact_information: 'संपर्क जानकारी',
    contact_placeholder: 'फोन या ईमेल',
    thumbnail_image: 'थंबनेल छवि',
    gallery_images: 'गैलरी छवियां',
    gallery_images_optional: 'गैलरी छवियां (वैकल्पिक, अधिकतम 5)',
    cancel: 'रद्द करें',
    create_product: 'उत्पाद बनाएं',
    creating_product: 'उत्पाद बनाया जा रहा है...',
    product_created_successfully: 'उत्पाद सफलतापूर्वक बनाया गया!',
    fill_required_fields: 'कृपया शीर्षक, विवरण, श्रेणी भरें और एक थंबनेल छवि अपलोड करें',
    file_size_limit: 'थंबनेल फ़ाइल का आकार 5MB से कम होना चाहिए',
    max_gallery_images: 'अधिकतम 5 गैलरी छवियों की अनुमति है',
    gallery_file_size_limit: 'प्रत्येक गैलरी छवि 5MB से कम होनी चाहिए',
    failed_to_create_product: 'उत्पाद बनाने में विफल। कृपया फिर से कोशिश करें।',
    search_products: 'उत्पाद खोजें',
    searching: 'खोज रहे हैं...',
    upload_images: 'छवियां अपलोड करें',
    drag_drop_images: 'छवियों को यहां खींचें और छोड़ें या चुनने के लिए क्लिक करें',
    max_2_images: 'अधिकतम 2 छवियां, प्रत्येक 5MB',
    selected_images: 'चयनित छवियां',
    search_results: 'खोज परिणाम',
    found_products: 'आपकी छवियों से मेल खाने वाले {count} उत्पाद{plural} मिले',
    no_products_found: 'कोई उत्पाद नहीं मिला',
    try_different_images: 'विभिन्न छवियां अपलोड करने या अपने खोज मानदंडों को समायोजित करने का प्रयास करें',
    add_more_images: 'और छवियां जोड़ें',
    remaining: 'शेष',
    loading: 'लोड हो रहा है...',
    loading_messages: 'संदेश लोड हो रहे हैं...',
    edited: 'संपादित',
    
    // Email verification translations
    verify_email_address: 'अपना ईमेल पता सत्यापित करें',
    otp_sent_to_email: 'आपके ईमेल पते पर एक सत्यापन कोड भेजा गया है',
    enter_verification_code: 'सत्यापन कोड दर्ज करें',
    verification_code_placeholder: '6-अंकीय कोड दर्ज करें',
    verifying_email: 'सत्यापित कर रहे हैं...',
    resend_code: 'कोड दोबारा भेजें',
    resending_code: 'दोबारा भेज रहे हैं...',
    otp_verified_success: 'ईमेल सफलतापूर्वक सत्यापित!',
    signup_complete: 'खाता सफलतापूर्वक बनाया गया! जारी रखने के लिए कृपया अपना ईमेल सत्यापित करें।',
    check_email_for_code: 'कृपया सत्यापन कोड के लिए अपना ईमेल देखें।',
  },
};

export function useLang() {
  return useContext(LangCtx);
}

export function T(key) {
  const { lang } = useContext(LangCtx);
  return dict[lang][key] ?? key;
}

export function LangProvider({ children }) {
  const [lang, setLang] = useState(
    localStorage.getItem('gp-lang') || LANGS.EN
  );

  useEffect(() => localStorage.setItem('gp-lang', lang), [lang]);

  const toggle = () =>
    setLang((l) => (l === LANGS.EN ? LANGS.HI : LANGS.EN));

  return (
    <LangCtx.Provider value={{ lang, toggle }}>
      {children}
    </LangCtx.Provider>
  );
}